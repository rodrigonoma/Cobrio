@import '../../../../styles/variables';
@import '../../../../styles/mixins';

.sidebar {
  width: $sidebar-width;
  height: 100vh;
  background: $bg-white;
  border-right: 1px solid $border-light;
  transition: width $transition-slow, transform $transition-slow;
  overflow-x: hidden;
  overflow-y: auto;

  @include custom-scrollbar;

  &.collapsed {
    width: $sidebar-width-collapsed;
  }

  // Mobile behavior
  @include mobile-only {
    position: fixed;
    left: 0;
    top: $header-height-mobile;
    bottom: 0;
    z-index: $z-sidebar-mobile + 1; // Acima do backdrop
    width: $sidebar-width;
    height: calc(100vh - #{$header-height-mobile});
    box-shadow: $shadow-xl;
    transform: translateX(-100%);

    // Quando não collapsed (= aberto no mobile)
    &:not(.collapsed) {
      transform: translateX(0);
      animation: slideInLeft $transition-slow;
    }
  }

  // Desktop behavior
  @include tablet-and-up {
    position: relative;
    top: 0;
    transform: translateX(0);
  }
}

.sidebar-nav {
  padding: $spacing-md 0;
}

.nav-item {
  @include flex-between;
  gap: $spacing-sm;
  padding: $spacing-sm $spacing-lg;
  color: $text-light;
  text-decoration: none;
  transition: all $transition-base;
  border-left: 3px solid transparent;
  cursor: pointer;
  position: relative;

  // Touch target mínimo para mobile
  @include mobile-only {
    @include touch-target;
    padding: $spacing-md $spacing-lg;
  }

  i {
    font-size: $font-size-xl;
    flex-shrink: 0;
    min-width: 1.5rem;
    text-align: center;
  }

  @include hover-state {
    background: $bg-light;
    color: $text-dark;
    padding-left: calc(#{$spacing-lg} + 0.25rem);
  }

  &.active {
    background: $primary-light;
    color: $primary-color;
    border-left-color: $primary-color;
    font-weight: 600;

    i {
      transform: scale(1.1);
    }
  }

  @include focus-visible;
}

.nav-label {
  font-weight: 500;
  font-size: $font-size-sm;
  white-space: nowrap;
  flex: 1;

  .collapsed & {
    display: none;
  }

  @include mobile-only {
    display: block !important; // Sempre mostrar label em mobile
  }
}
